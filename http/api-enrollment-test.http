### 전역 변수 설정 (환경에 맞게 변경하세요)
@host = http://localhost:8080
@contentType = application/json
@studentId = 20
@email = test3@example.com
@password = pass3
@authCode = 05-01-01
@name = Tester3
@birthDate = 2005-01-01
@role = STUDENT


# ==========================================
# 1. [Happy Path] 전체 성공 시나리오
# ==========================================

### 0-1. 회원 가입
POST http://localhost:8080/api/auth/register
Content-Type: {{contentType}}

{
  "email": "{{email}}",
  "password": "{{password}}",
  "name": "{{name}}",
  "birthDate": "{{birthDate}}",
  "role": "{{role}}"
}

### 0-2. 계정 활성화
POST http://localhost:8080/api/auth/activate
Content-Type: {{contentType}}

{
  "email": "{{email}}",
  "name": "{{name}}",
  "birthDate": "{{birthDate}}",
  "authCode": "{{authCode}}",
  "newPassword": "{{password}}"
}

### 0-3. 로그인
POST {{host}}/api/auth/login
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}"
}



# ==========================================
# 1. 정상 흐름 (Happy Path)
# ==========================================

### 1-1. 장바구니 담기 (과목 101)
POST {{host}}/api/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 101
}

### 1-0. 일반 수강 신청 (과목 101)
POST {{host}}/api/enrollments
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 101
}

### 1-2. 장바구니 담기 (과목 102)
POST {{host}}/api/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 102
}

### 1-3. 수강 신청 (일괄 신청 - 장바구니 기반)
# 변경됨: studentId나 courseIds를 보낼 필요 없음 (DB 장바구니 조회)
POST {{host}}/api/enrollments/bulk
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

# (Body 없음)


# ==========================================
# 2. [Mixed Case] 일부 성공, 일부 실패 (정원 초과 등)
# ==========================================

### 2-1. 장바구니 담기 (과목 201 - 만석 가정)
POST {{host}}/api/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 201
}

### 2-2. 장바구니 담기 (과목 202 - 여유)
POST {{host}}/api/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 202
}

### 2-3. 수강 신청 (일괄 신청)
# 기대 결과: 부분 성공 (202번 성공, 201번 실패 메시지 포함)
POST {{host}}/api/enrollments/bulk
Content-Type: {{contentType}}
Authorization: Bearer {{token}}


# ==========================================
# 3. [Fail Case] 중복 신청
# ==========================================

### 3-1. 장바구니 담기 (과목 301 - 이미 수강중인 과목)
POST {{host}}/api/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 301
}

### 3-2. 수강 신청 (일괄 신청)
POST {{host}}/api/enrollments/bulk
Content-Type: {{contentType}}
Authorization: Bearer {{token}}


# ==========================================
# 4. 조회 기능 테스트
# ==========================================

### 4-1. 내 수강 신청 내역 조회 (History)
# 변경됨: ?userId=... 제거
GET {{host}}/api/enrollments/history
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### 4-2. 내 시간표 조회 (Timetable)
# 변경됨: ?userId=... 제거
GET {{host}}/api/enrollments/timetable
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### 4-3. 내 장바구니 내역 조회
GET {{host}}/api/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}


# ==========================================
# 5. 취소/삭제 테스트
# ==========================================

### 5-1. 장바구니 삭제 요청
# URL 경로에 지우고 싶은 courseId 입력
DELETE {{host}}/api/carts/courses/201
Authorization: Bearer {{token}}

### 5-2. 수강 취소 요청
# URL 경로에 취소할 enrollmentId 입력 (조회 결과 확인 후 기입)
DELETE {{host}}/api/enrollments/3
Authorization: Bearer {{token}}



