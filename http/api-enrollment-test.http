### 전역 변수 설정 (환경에 맞게 변경하세요)
@host = http://localhost:8080
@contentType = application/json
@email = test4@example.com
@password = 1234
@authCode = 050101
@name = Tester4
@birthDate = 2005-01-01
@role = STUDENT
@Teacheremail = Teacher@example.com
@Teacherpassword = 1234
@TeacherauthCode = 950101
@Teachername = TeacherTester
@TeacherbirthDate = 1995-01-01
@Teacherrole = TEACHER

### 관리자 로그인
POST {{host}}/api/v1/auth/login
Content-Type: {{contentType}}

{
  "email": "admin@test.com",
  "password": "admin1234"
}

> {%
    // 응답에서 accessToken을 추출하여 전역 변수 'adminToken'에 저장
    client.global.set("adminToken", response.body.data.accessToken);
%}

### 관리자 로그아웃
POST {{host}}/api/v1/auth/logout
Authorization: Bearer {{adminToken}}


# ==========================================
# 1. [Happy Path] 전체 성공 시나리오
# ==========================================

### 0-1. 회원 가입
POST http://localhost:8080/api/v1/auth/register
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

{
  "email": "{{email}}",
  "password": "{{password}}",
  "name": "{{name}}",
  "birthDate": "{{birthDate}}",
  "role": "{{role}}"
}

### 0-2. 계정 활성화
POST http://localhost:8080/api/v1/auth/activate
Content-Type: {{contentType}}

{
  "email": "{{email}}",
  "name": "{{name}}",
  "birthDate": "{{birthDate}}",
  "authCode": "{{authCode}}",
  "newPassword": "{{password}}"
}

### 0-3. 학생 로그인
POST {{host}}/api/v1/auth/login
Content-Type: {{contentType}}

{
  "email": "{{email}}",
  "password": "{{password}}"
}

> {%
    // 응답에서 accessToken을 꺼내서 token 변수에 저장합니다.
    // (응답 필드명이 accessToken이 아니라면 수정 필요)
    client.global.set("token", response.body.data.accessToken);
%}

### 학생 로그아웃
POST {{host}}/api/v1/auth/logout
Authorization: Bearer {{token}}


### 0-1. 선생님 회원 가입
POST http://localhost:8080/api/v1/auth/register
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

{
  "email": "{{Teacheremail}}",
  "password": "{{Teacherpassword}}",
  "name": "{{Teachername}}",
  "birthDate": "{{TeacherbirthDate}}",
  "role": "{{Teacherrole}}"
}


### 0-2. 선생님 계정 활성화
POST http://localhost:8080/api/v1/auth/activate
Content-Type: {{contentType}}

{
  "email": "{{Teacheremail}}",
  "name": "{{Teachername}}",
  "birthDate": "{{TeacherbirthDate}}",
  "authCode": "{{TeacherauthCode}}",
  "newPassword": "{{Teacherpassword}}"
}

### 0-3. 선생님 로그인
POST {{host}}/api/v1/auth/login
Content-Type: {{contentType}}

{
  "email": "{{Teacheremail}}",
  "password": "{{Teacherpassword}}"
}

> {%
    // 응답에서 accessToken을 꺼내서 token 변수에 저장합니다.
    // (응답 필드명이 accessToken이 아니라면 수정 필요)
    client.global.set("teacherToken", response.body.data.accessToken);
%}

### 선생님 로그아웃
POST {{host}}/api/v1/auth/logout
Authorization: Bearer {{teacherToken}}

### 강좌 개설 요청
POST {{host}}/api/v1/courses

{
  "name": "국어",
  "courseType": "MANDATORY",
  "maxCapacity": 5,
  "tuition": 0,
  "subjectId": 1,
  "academicYearId": 0,
  "teacherDetailId": 0,
  "timeSlots": [
    {
      "dayOfWeek": "string",
      "period": 1,
      "classroom": "string"
    }
  ]
}


# ==========================================
# 1. 정상 흐름 (Happy Path)
# ==========================================

### 1-1. 장바구니 담기 (과목 101)
POST {{host}}/api/v1/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 101
}

### 1-0. 일반 수강 신청 (과목 101)
POST {{host}}/api/v1/enrollments
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 101
}

### 1-2. 장바구니 담기 (과목 102)
POST {{host}}/api/v1/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 102
}

### 1-3. 수강 신청 (일괄 신청 - 장바구니 기반)
# 변경됨: studentId나 courseIds를 보낼 필요 없음 (DB 장바구니 조회)
POST {{host}}/api/v1/enrollments/bulk
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

# (Body 없음)


# ==========================================
# 2. [Mixed Case] 일부 성공, 일부 실패 (정원 초과 등)
# ==========================================

### 2-1. 장바구니 담기 (과목 201 - 만석 가정)
POST {{host}}/api/v1/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 201
}

### 2-2. 장바구니 담기 (과목 202 - 여유)
POST {{host}}/api/v1/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 202
}

### 2-3. 수강 신청 (일괄 신청)
# 기대 결과: 부분 성공 (202번 성공, 201번 실패 메시지 포함)
POST {{host}}/api/v1/enrollments/bulk
Content-Type: {{contentType}}
Authorization: Bearer {{token}}


# ==========================================
# 3. [Fail Case] 중복 신청
# ==========================================

### 3-1. 장바구니 담기 (과목 301 - 이미 수강중인 과목)
POST {{host}}/api/v1/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "courseId": 301
}

### 3-2. 수강 신청 (일괄 신청)
POST {{host}}/api/v1/enrollments/bulk
Content-Type: {{contentType}}
Authorization: Bearer {{token}}


# ==========================================
# 4. 조회 기능 테스트
# ==========================================

### 4-1. 내 수강 신청 내역 조회 (History)
# 변경됨: ?userId=... 제거
GET {{host}}/api/v1/enrollments/history
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### 4-2. 내 시간표 조회 (Timetable)
# 변경됨: ?userId=... 제거
GET {{host}}/api/v1/enrollments/timetable
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### 4-3. 내 장바구니 내역 조회
GET {{host}}/api/v1/carts
Content-Type: {{contentType}}
Authorization: Bearer {{token}}


# ==========================================
# 5. 취소/삭제 테스트
# ==========================================

### 5-1. 장바구니 삭제 요청
# URL 경로에 지우고 싶은 courseId 입력
DELETE {{host}}/api/v1/carts/courses/201
Authorization: Bearer {{token}}

### 5-2. 수강 취소 요청
# URL 경로에 취소할 enrollmentId 입력 (조회 결과 확인 후 기입)
DELETE {{host}}/api/v1/enrollments/3
Authorization: Bearer {{token}}



