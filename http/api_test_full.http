### 0-1. 관리자 로그인
POST http://localhost:8000/auth/login
Content-Type: application/json

{
  "email": "admin@test.com",
  "password": "admin1234"
}

> {%
    client.global.set("admin_access_token", response.body.data.accessToken);
    client.global.set("admin_refresh_token", response.body.data.refreshToken);
%}

### 0-1-1. 과목 생성 (MATH) - 교사 등록 전 필수
POST http://localhost:8000/subjects
Authorization: Bearer {{admin_access_token}}
Content-Type: application/json

{
    "name": "MATH"
}

### 0-2. 교사 회원가입
POST http://localhost:8000/user/register
Content-Type: application/json
Authorization: Bearer {{admin_access_token}}

{
  "email": "teacher2@test.com",
  "password": "password1534!",
  "name": "김선생",
  "role": "TEACHER",
  "birthDate": "1991-01-01",
  "teacherDetail": {
    "subject": "MATH"
  }
}

> {%
    client.global.set("teacher_email", "teacher2@test.com");
    client.global.set("teacher_password", "password1234!");
    client.global.set("teacher_auth_code", "950101");
%}

### 0-3. 교사 계정 활성화
POST http://localhost:8000/auth/activate
Content-Type: application/json

{
  "email": "{{teacher_email}}",
  "name": "김선생",
  "birthDate": "1991-01-01",
  "authCode": "{{teacher_auth_code}}",
  "newPassword": "{{teacher_password}}"
}

### 0-4. 교사 로그인
POST http://localhost:8000/auth/login
Content-Type: application/json

{
  "email": "{{teacher_email}}",
  "password": "{{teacher_password}}"
}

> {%
    client.global.set("teacher_access_token", response.body.data.accessToken);
    client.global.set("teacher_id", response.body.data.id);
%}
### 0-4-1. 교사 ID 조회 (fallback)
GET http://localhost:8000/user/me
Authorization: Bearer {{teacher_access_token}}

> {%
    client.global.set("teacher_id", response.body.data.userId);
%}

### 0-5. 학생 회원가입
POST http://localhost:8000/user/register
Content-Type: application/json
Authorization: Bearer {{admin_access_token}}

{
  "email": "student1@test.com",
  "password": "password1234!",
  "name": "이학생",
  "role": "STUDENT",
  "birthDate": "2005-01-01",
  "studentDetail": {
    "grade": 1,
    "classNo": "A",
    "studentNo": 1
  }
}

> {%
    client.global.set("student_email", "student1@test.com");
    client.global.set("student_password", "password1234!");
    client.global.set("student_auth_code", "050101");
%}

### 0-6. 학생 계정 활성화
POST http://localhost:8000/auth/activate
Content-Type: application/json

{
  "email": "{{student_email}}",
  "name": "이학생",
  "birthDate": "2005-01-01",
  "authCode": "{{student_auth_code}}",
  "newPassword": "{{student_password}}"
}

### 0-7. 학생 로그인
POST http://localhost:8000/auth/login
Content-Type: application/json

{
  "email": "{{student_email}}",
  "password": "{{student_password}}"
}

> {%
    client.global.set("student_access_token", response.body.data.accessToken);
%}

### 0-4-1. 학생 ID 조회 (fallback)
GET http://localhost:8000/user/me
Authorization: Bearer {{student_access_token}}

> {%
    client.global.set("student_id", response.body.data.userId);
%}

### 0-8. 기초 데이터 생성 (관리자)
#### 0-8-1. 학년도 생성 (2026년 1학기)
POST http://localhost:8000/schedule/years
Authorization: Bearer {{admin_access_token}}
Content-Type: application/json

{
  "year": 2026,
  "semester": 1,
  "startDate": "2026-03-01",
  "endDate": "2026-06-30"
}

> {%
    client.global.set("academic_year_id", response.body.data);
%}

#### 0-8-2. 과목 생성 (Mathematics)
POST http://localhost:8000/subjects
Authorization: Bearer {{admin_access_token}}
Content-Type: application/json

{
    "name": "Mathematics"
}

> {%
    client.global.set("subject_id", response.body.data);
%}

### 0-9. 강좌 개설 및 승인
#### 0-9-1. 강좌 개설 신청 (교사)
POST http://localhost:8000/courses
Authorization: Bearer {{teacher_access_token}}
Content-Type: application/json

{
  "name": "기초 수학 1",
  "courseType": "MANDATORY",
  "maxCapacity": 30,
  "tuition": 200000,
  "subjectId": {{subject_id}},
  "academicYearId": {{academic_year_id}},
  "teacherDetailId": {{teacher_id}},
  "timeSlots": [
    {
      "dayOfWeek": "MONDAY",
      "period": 1,
      "classroom": "101호"
    }
  ]
}

#### 0-9-2. 강좌 목록 조회 및 ID 획득 (교사)
GET http://localhost:8000/courses/teacher/{{teacher_id}}
Authorization: Bearer {{teacher_access_token}}

> {%
    // 목록 첫번째 강좌 ID 획득
    client.global.set("course_id", response.body.data.content[0].courseId);
%}

#### 0-9-3. 강좌 승인 (관리자)
POST http://localhost:8000/courses/{{course_id}}/approve
Authorization: Bearer {{admin_access_token}}

### 0-10. 수강 신청
#### 0-10-1. 수강 신청 (학생)
POST http://localhost:8000/enrollments
Authorization: Bearer {{student_access_token}}
Content-Type: application/json

{
    "courseId": {{course_id}}
}

> {%
    client.global.set("enrollment_id", response.body.data);
%}

### 1. 일정(Schedule) 조회
#### 1-1. 월간 일정 조회
GET http://localhost:8000/schedule/events/monthly?year=2026&month=1
Authorization: Bearer {{student_access_token}}

#### 1-2. 주간 일정 조회
GET http://localhost:8000/schedule/events/weekly?startDate=2026-01-01&endDate=2026-01-07
Authorization: Bearer {{student_access_token}}


### 2. 시설(Reservation) 예약
#### 2-1. 시설 예약 신청 (학생)
POST http://localhost:8000/reservation?studentId=1
Content-Type: application/json
Authorization: Bearer {{student_access_token}}

{
  "facilityId": 1,
  "reservationDate": "2026-01-15",
  "startTime": "10:00",
  "endTime": "12:00",
  "reason": "동아리 활동"
}

#### 2-2. 예약 변경
PUT http://localhost:8000/reservation/1?studentId=1
Content-Type: application/json
Authorization: Bearer {{student_access_token}}

{
  "reservationDate": "2026-01-16",
  "startTime": "14:00",
  "endTime": "16:00",
  "reason": "시간 변경"
}


### 3. 출결(Attendance) 관리
#### 3-1. 출석부 자동 생성 (교사)
POST http://localhost:8000/attendance
Content-Type: application/json
Authorization: Bearer {{teacher_access_token}}

{
  "courseId": {{course_id}},
  "classDate": "2026-01-14",
  "period": 1
}

#### 3-2. 출결 저장 (교사)
PATCH http://localhost:8000/attendance
Content-Type: application/json
Authorization: Bearer {{teacher_access_token}}

{
  "courseId": {{course_id}},
  "classDate": "2026-01-14",
  "period": 1,
  "items": [
    {
      "enrollmentId": {{enrollment_id}},
        "status": "PRESENT"
    }
  ]
}

#### 3-3. 출결 목록 조회 (교사/관리자)
GET http://localhost:8000/attendance?courseId={{course_id}}&fromDate=2026-01-01&toDate=2026-01-31
Authorization: Bearer {{teacher_access_token}}
