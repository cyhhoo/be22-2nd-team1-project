### 전역 변수 설정 (환경에 맞게 변경하세요)
@host = http://localhost:8080
@contentType = application/json
@teacherUserId = 20
@email = teacher1@schoolmate.local
@password = Passw0rd!
@authCode = 05-01-01
@name = Teacher1
@birthDate = 1980-01-01
@role = TEACHER

// admin@test.com
// admin1234
// teacher1@schoolmate.local
// Passw0rd!

### 0. 로그인 (토큰 발급)
POST {{host}}/api/v1/auth/login
Content-Type: {{contentType}}

{
  "email": "{{email}}",
  "password": "{{password}}"
}

> {%
client.global.set("auth_token", response.body.data.accessToken);
%}

### 관리자 로그인
POST {{host}}/api/v1/auth/login
Content-Type: {{contentType}}

{
  "email": "admin@test.com",
  "password": "admin1234"
}

> {%
    // 응답에서 accessToken을 추출하여 전역 변수 'adminToken'에 저장
    client.global.set("adminToken", response.body.data.accessToken);
%}

### 관리자 로그아웃
POST {{host}}/api/v1/auth/logout
Authorization: Bearer {{adminToken}}


### 1. 강좌 개설 신청 (PENDING)
POST {{host}}/api/v1/courses
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "name": "Java Programming Basic",
  "courseType": "MANDATORY",
  "maxCapacity": 30,
  "tuition": 150000,
  "subjectId": 10,
  "academicYearId": 1,
  "teacherDetailId": 1001,
  "timeSlots": [
    {
      "dayOfWeek": "MON",
      "period": 1,
      "classroom": "Room 101"
    },
    {
      "dayOfWeek": "WED",
      "period": 2,
      "classroom": "Room 101"
    }
  ]
}

### 16. 로그아웃
POST {{host}}/api/v1/auth/logout
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

> {%
    // 클라이언트(IntelliJ)의 전역 변수에서 토큰 삭제   
    client.global.clear("auth_token");
    client.log("Logout successful. Token cleared.");
%}

### 2. 강좌 승인 (PENDING -> OPEN)
POST {{host}}/api/v1/courses/1003/approve
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

### 3. 강좌 반려 (PENDING -> REFUSE)
POST {{host}}/api/v1/courses/1002/refuse?reason=Curriculum+Insufficient
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

### 4. 강좌 목록 조회 (관리자 - 전체)
GET {{host}}/api/v1/courses?page=0&size=10
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

### 5. 강좌 목록 조회 (교사별)
GET {{host}}/api/v1/courses/teacher/1001?page=0&size=10
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

### 6. 강좌 상태 수동 변경 (OPEN -> CLOSED)
PUT {{host}}/api/v1/courses/1001/status?status=CLOSED
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

### 7. 교사 주간 시간표 조회
GET {{host}}/api/v1/courses/teacher/1001/timetable?semester=1
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

### 8. 강좌 변경 요청 (정원 증가)
POST {{host}}/api/v1/courses/1002/request-update?reason=Capacity+Increase
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "maxCapacity": 50,
  "tuition": 150000
}

> {%
    client.global.set("requestId", response.body.data);
    client.log("Captured Request ID: " + response.body.data);
%}

### 9. 강좌 변경 요청 승인
POST {{host}}/api/v1/courses/requests/{{requestId}}/approve
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

### 10. 강좌 변경 요청 반려
POST {{host}}/api/v1/courses/requests/{{requestId}}/reject?reason=No+Budget
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

### 11. 담당 교사 변경
# newTeacherId는 QueryParma
POST {{host}}/api/v1/courses/1001/change-teacher?newTeacherId=1002
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}

### 12. 강좌 폐강 (관리자 삭제)
POST {{host}}/api/v1/courses/1003/cancel?reason=Low+Enrollment
Content-Type: {{contentType}}
Authorization: Bearer {{adminToken}}




### 13. 수강생 상세 조회
GET {{host}}/api/v1/courses/1001/students/2001
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

### 14. 수강생 메모 수정
PUT {{host}}/api/v1/courses/1001/students/2001/memo
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

학생이 수업 태도가 매우 우수함.

### 15. 수강생 강제 취소
POST {{host}}/api/v1/courses/1001/students/2001/force-cancel?reason=Attendance+Issue
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}
